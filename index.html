<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0b1020"/>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>Selfcare / To‑Do Tombola (PWA)</title>
  <style>
    :root{ --bg:#0b1020; --card:#121a33; --muted:#8ea0c2; --text:#e8eeff; --border:rgba(255,255,255,.08); }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;
         background:radial-gradient(1000px 600px at 15% -10%,#1a2557 0%,transparent 60%),
                    radial-gradient(900px 500px at 110% -20%,#1a5734 0%,transparent 60%),var(--bg);color:var(--text);}
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}
    header{display:flex;align-items:end;justify-content:space-between;gap:16px;margin-bottom:18px}
    h1{font-size:clamp(22px,2vw,28px);margin:0;letter-spacing:.4px}
    .sub{color:var(--muted);font-size:.95rem}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));border:1px solid var(--border);
          border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    label{display:block;font-weight:600;margin-bottom:6px}
    input[type="text"], select{width:100%;padding:12px 14px;border-radius:12px;background:#0f1630;border:1px solid var(--border);color:var(--text);outline:none}
    input[type="text"]::placeholder{color:#6f7ea6}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:1px solid var(--border);background:#0f1630;color:#e8eeff;padding:10px 14px;border-radius:12px;
         font-weight:600;cursor:pointer;transition:transform .05s ease, border-color .2s ease}
    .btn:hover{border-color:#2a3b7a}
    .btn:active{transform:translateY(1px)}
    .btn.primary{background:linear-gradient(180deg,#1a2a64,#132048);border-color:#2f4db3}
    .btn.good{background:linear-gradient(180deg,#1e3a2e,#0f271b);border-color:#2f7a4d}
    .btn.warn{background:linear-gradient(180deg,#5a1a1a,#2c0d0d);border-color:#8a2a2a}
    .seg{display:inline-flex;background:#0e1730;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .seg button{border:0;background:transparent;color:#9fb3e0;padding:8px 12px;font-weight:700;cursor:pointer}
    .seg button.active{background:#1a2753;color:#e8eeff}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--border);
          background:#0f1630;color:#9fb3e0;font-weight:600}
    .pill input{accent-color:#6fa0ff}
    .list{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:12px}
    @media (max-width:900px){.list{grid-template-columns:1fr}}
    .item{display:flex;align-items:center;justify-content:space-between;gap:10px;background:#0e1733;border:1px solid var(--border);
          padding:10px 12px;border-radius:12px}
    .item small{color:#9fb3e0}
    .section-title{display:flex;align-items:center;justify-content:space-between;margin:8px 0 4px;gap:8px}
    .section-title h3{margin:0;font-size:1rem}
    .muted{color:#9fb3e0}
    .result{margin-top:12px;padding:16px;border-radius:14px;border:1px dashed #3a528e;background:rgba(26,42,100,.2);font-size:1.15rem}
    .empty{padding:16px;border-radius:12px;border:1px dashed var(--border);color:#9fb3e0}
    .foot{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:18px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#0b1226;border:1px solid var(--border);
         padding:2px 8px;border-radius:8px;color:#cbd8ff}
    .rolling{opacity:.95}
    .disabled{opacity:.6;pointer-events:none;}
  </style>
  <script defer src="app.js"></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1 id="appTitle">Selfcare‑Tombola</h1>
        <div class="sub">Aktivitäten/To‑Dos speichern → Zeitfenster wählen (oder „Egal“) → Zufallsidee ziehen. Funktioniert offline.</div>
        <div class="seg" role="tablist" aria-label="Modus">
          <button id="modeSelfcare" class="active" role="tab" aria-selected="true">Selfcare</button>
          <button id="modeTodo" role="tab" aria-selected="false">To‑Do</button>
        </div>
      </div>
      <div class="row">
        <button class="btn" id="exportBtn" title="Als JSON exportieren">Export</button>
        <label class="btn" for="importFile" title="JSON importieren" style="cursor:pointer">Import<input id="importFile" type="file" accept="application/json" style="display:none"></label>
        <button class="btn warn" id="resetBtn" title="Alles löschen">Reset</button>
        <button class="btn" id="installBtn" title="App installieren" style="display:none">Installieren</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2 style="margin:4px 0 12px" id="formTitle">Eintrag hinzufügen</h2>
        <div class="row" style="gap:12px">
          <div style="flex:2 1 320px">
            <label for="title">Titel</label>
            <input id="title" type="text" placeholder="z. B. 5‑Minuten‑Atmung / Müll rausbringen" />
          </div>
          <div style="flex:1 1 200px">
            <label for="category">Dauer</label>
            <select id="category">
              <option value="<10">&lt; 10 Minuten</option>
              <option value="10-20">10–20 Minuten</option>
              <option value="20-30">20–30 Minuten</option>
              <option value=">30">&gt; 30 Minuten</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <button class="btn primary" id="addBtn">Speichern</button>
          <span class="muted">Tipp: <span class="kbd">Enter</span> speichert.</span>
        </div>

        <div class="section-title" style="margin-top:18px">
          <div class="row" style="align-items:center;gap:10px">
            <h3 id="listTitle" style="margin-right:4px">Ideenpool</h3>
            <button class="btn" id="togglePoolBtn">Ideenpool zeigen</button>
          </div>
          <small class="muted" id="countInfo"></small>
        </div>
        <div id="poolWrap" style="display:none">
          <div id="list" class="list"></div>
          <div id="empty" class="empty" style="display:none">Noch nichts gespeichert.</div>
        </div>
      </section>

      <section class="card">
        <h2 style="margin:4px 0 12px">Ziehung</h2>
        <div class="row" style="gap:8px;flex-wrap:wrap">
          <label class="pill"><input type="radio" name="pickCat" value="any" checked> Egal</label>
          <label class="pill"><input type="radio" name="pickCat" value="<10"> &lt;10</label>
          <label class="pill"><input type="radio" name="pickCat" value="10-20"> 10–20</label>
          <label class="pill"><input type="radio" name="pickCat" value="20-30"> 20–30</label>
          <label class="pill"><input type="radio" name="pickCat" value=">30"> &gt;30</label>
        </div>
        <div class="row" style="margin-top:12px">
          <button class="btn good" id="drawBtn">Zieh was!</button>
          <button class="btn" id="skipBtn" title="Die letzte gezogene Idee ignorieren und neu ziehen">Nochmal</button>
          <button class="btn" id="doneBtn" title="Gezogenen Eintrag als erledigt markieren (nur To‑Do)">Erledigt</button>
        </div>
        <div id="result" class="result" style="display:none"></div>
        <div id="noData" class="empty" style="display:none">Für die Auswahl ist noch nichts gespeichert.</div>
      </section>
    </div>

    <div class="foot muted">
      <div>Speicherung lokal (<em>localStorage</em>). Modus‑getrennt (Selfcare und To‑Do).</div>
      <div>Tastenkürzel: <span class="kbd">Enter</span> Speichern · <span class="kbd">Ctrl/⌘ + K</span> Ziehung</div>
    </div>
  </div>
</body>
</html>
